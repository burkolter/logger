(()=>{"use strict";var e,t={d:(e,r)=>{for(var o in r)t.o(r,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:r[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},r={};t.r(r),t.d(r,{AjaxWriter:()=>s,ConsoleWriter:()=>a,LogLevelExtension:()=>o,Logger:()=>i,LoggerUtility:()=>l,Severity:()=>e}),function(e){e[e.FATAL=6]="FATAL",e[e.ERROR=5]="ERROR",e[e.WARN=4]="WARN",e[e.INFO=3]="INFO",e[e.DEBUG=2]="DEBUG",e[e.TRACE=1]="TRACE"}(e||(e={}));var o,n=function(){function t(t,r,o,n,i,s){void 0===s&&(s=null),this.timestamp=new Date,this.category=null,this.level=e.DEBUG,this.message=null,this.payload=null,this.callstack=null,this.category=t,this.level=r,this.message=o,this.payload=n,this.callstack=i,this.logger=s}return t.prototype.getLogger=function(){return this.logger},t}();!function(e){e[e.ALL=0]="ALL",e[e.NONE=10]="NONE"}(o||(o={}));var i=function(){function t(e,t){this.parent=null,this.children=new Map,this.logLevel=o.ALL,this.writers=[],this.intervalHolder=null,this.parent=t,this.name=e}return t.getRootLogger=function(){return this._root},t.prototype.setFlushInterval=function(e){var t=this;this.removeFlushInterval(),this.intervalHolder=window.setInterval((function(){t.flush(!0)}),e)},t.prototype.removeFlushInterval=function(){this.intervalHolder>0&&(window.clearInterval(this.intervalHolder),this.intervalHolder=-1)},t.prototype.flush=function(e){void 0===e&&(e=!0),this.writers.forEach((function(e){e.flush()})),e&&this.children.forEach((function(t){t.flush(e)}))},t.prototype.setLogLevel=function(e){this.logLevel=e},t.prototype.getLogLevel=function(){return this.logLevel},t.prototype.addWritter=function(e){this.writers.push(e)},t.prototype.removeWritter=function(e){var t=this.writers.indexOf(e,0);t>-1&&this.writers.splice(t,1)},t.prototype.createAndRememberChildLogger=function(e){var r=new t(e,this);return this.children.set(e,r),r},t.prototype.getChildLogger=function(e){var t=this.children.get("name");return void 0===t&&(t=this.createAndRememberChildLogger(e)),t},t.prototype.removeChildLogger=function(e){this.children.delete(e)},t.prototype.propagateLogEntry=function(e){this.writers.forEach((function(t){t.writeLogEntry(e)})),null!==this.parent&&this.parent.propagateLogEntry(e)},t.prototype.log=function(e,t,r,o){if(!(e<this.logLevel)){var i=new n(this.name,e,t,r,o,this);return this.propagateLogEntry(i),i}},t.prototype.convertAndLog=function(t,r,o){void 0===o&&(o=!1);var n="",i=null,s=null;if(o&&(i=Error().stack),r.length>=1&&("string"==typeof r[0]&&(n=r[0]),r[0]instanceof Error&&(n=(a=r[0]).name+": "+a.message,i=a.stack),"object"==typeof r[0]&&(s=r[0])),r.length>=2){if(r[1]instanceof Error){var a=r[1];n=""!==n?n+" - "+a.name+": "+a.message:a.name+": "+a.message,i=a.stack}"object"==typeof r[1]&&(s=r[1]),"string"==typeof r[1]&&(s=r[1])}return r.length>=3&&r[2]instanceof Error&&(a=r[2],n=""!==n?n+" - "+a.name+": "+a.message:a.name+": "+a.message,i=a.stack),r.length>3&&(t=e.ERROR,n="too many params in log-call",i=Error().stack,s=r),this.log(t,n,s,i)},t.prototype.trace=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return this.convertAndLog(e.TRACE,t,!0)},t.prototype.debug=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return this.convertAndLog(e.DEBUG,t)},t.prototype.info=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return this.convertAndLog(e.INFO,t)},t.prototype.warn=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return this.convertAndLog(e.WARN,t)},t.prototype.error=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return this.convertAndLog(e.ERROR,t)},t.prototype.fatal=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return this.convertAndLog(e.FATAL,t)},t._root=new t("",null),t}(),s=function(){function t(t,r){this.messageBuffer=[],this.forceFlushLevel=e.WARN,this.customHeaders=[],this.targetUrl=t,void 0!==r&&(this.customHeaders=r)}return t.prototype.prepareHeaders=function(){var e=new Headers;return e.append("Content-Type","application/json"),this.customHeaders.forEach((function(t){e.append(t.header,t.value)})),e},t.prototype.send=function(e){var t=this.prepareHeaders();this.forceStringPayload&&e.forEach((function(e){e.payload&&"object"==typeof e.payload&&(e.payload=JSON.stringify(e.payload))})),fetch(this.targetUrl,{method:"POST",headers:t,keepalive:!0,body:JSON.stringify(e)}).then((function(t){t.ok||console.warn("logger: error sending logs",e,t)})).catch((function(t){console.error("logger: error sending logs",e,t)}))},t.prototype.writeLogEntry=function(e){this.messageBuffer.push(e),(this.messageBuffer.length>=this.bufferSize||e.level>=this.forceFlushLevel)&&this.send(this.messageBuffer.splice(0))},t.prototype.flush=function(){this.messageBuffer.length>0&&this.send(this.messageBuffer.splice(0))},t}(),a=function(){function t(){}return t.prototype.writeLogEntry=function(t){var r;switch(r=""!==t.category?t.category+" : "+t.message:t.message,t.level){case e.TRACE:case e.DEBUG:console.log(r,t.payload,t.callstack);break;case e.INFO:console.info(r,t.payload,t.callstack);break;case e.WARN:console.warn(r,t.payload,t.callstack);break;case e.ERROR:case e.FATAL:console.error(r,t.payload,t.callstack);break;default:throw new Error("not implemented level '"+t.level+"'")}},t.prototype.flush=function(){},t}();const l=function(){function e(){}return e.getConsoleWriter=function(){return new a},e.getAjaxWriter=function(e,t){return t||(t=[]),new s(e,t)},e.getLogger=function(){return i.getRootLogger()},e.flushWriters=function(){i.getRootLogger().flush(!0)},e.setFlushOnUnload=function(){var e=this;window.addEventListener("unload",(function(t){e.flushWriters()}))},e.setFlushOnBeforeUnload=function(){var e=this;window.addEventListener("beforeunload",(function(t){e.flushWriters()}))},e.setFlushOnHide=function(){var e=this;window.addEventListener("visibilitychange",(function(t){document.hidden&&e.flushWriters()}))},e}();self.logger=r})();
//# sourceMappingURL=logger.min.js.map